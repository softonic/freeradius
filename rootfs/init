#!/bin/sh

KRB5_CONFIG_FILE='/etc/krb5.conf'

FREERADIUS_KDC_IP="${FREERADIUS_KDC_IP:-127.0.0.1}" && \
sed -i "s#XXX-FREERADIUS_KDC_IP-XXX#${FREERADIUS_KDC_IP}#g" ${KRB5_CONFIG_FILE}

FREERADIUS_KDC_DEFAULT_REALM="${FREERADIUS_KDC_DEFAULT_REALM:-EXAMPLE.COM}" && \
sed -i "s#XXX-FREERADIUS_KDC_DEFAULT_REALM-XXX#${FREERADIUS_KDC_DEFAULT_REALM}#g" ${KRB5_CONFIG_FILE}

FREERADIUS_KDC_DOMAIN="${FREERADIUS_KDC_DOMAIN:-example.com}" && \
sed -i "s#XXX-FREERADIUS_KDC_DOMAIN-XXX#${FREERADIUS_KDC_DOMAIN}#g" ${KRB5_CONFIG_FILE}

FREERADIUS_KDC_DOMAIN_REALM="${XXX-FREERADIUS_KDC_DOMAIN_REALM:-example.com}" && \
sed -i "s#XXX-FREERADIUS_KDC_DOMAIN_REALM-XXX#${FREERADIUS_KDC_DOMAIN_REALM}#g" ${KRB5_CONFIG_FILE}

radiusd -xx -f
